# å¸¦å®½ç­‰çº§æ•°ï¼ˆBandwidth Levelsï¼‰è¯¦è§£

## ä»€ä¹ˆæ˜¯å¸¦å®½ç­‰çº§æ•°ï¼Ÿ

å¸¦å®½ç­‰çº§æ•°æ˜¯æŒ‡å°†è¿ç»­çš„å¸¦å®½å€¼ç¦»æ•£åŒ–ä¸ºæœ‰é™ä¸ªç­‰çº§çš„æ•°é‡ã€‚åœ¨å¼ºåŒ–å­¦ä¹ ä¸­ï¼Œç”±äºåŠ¨ä½œç©ºé—´å¿…é¡»æ˜¯ç¦»æ•£çš„ï¼Œæˆ‘ä»¬éœ€è¦å°†è¿ç»­çš„å¸¦å®½å€¼ï¼ˆå¦‚10-200 Mbpsï¼‰è½¬æ¢ä¸ºç¦»æ•£çš„åŠ¨ä½œé€‰æ‹©ã€‚

## å·¥ä½œåŸç†

### 1. è¿ç»­å¸¦å®½å€¼ â†’ ç¦»æ•£ç­‰çº§

```
è¿ç»­å¸¦å®½èŒƒå›´ï¼š10 - 200 Mbps
å¸¦å®½ç­‰çº§æ•°ï¼š10
```

è¿™æ„å‘³ç€æˆ‘ä»¬å°†10-200 Mbpsçš„å¸¦å®½èŒƒå›´åˆ†ä¸º10ä¸ªç­‰çº§ï¼š

| ç­‰çº§ | å¸¦å®½åŠ¨ä½œ | å®é™…å¸¦å®½å€¼ | è¯´æ˜ |
|------|----------|------------|------|
| 0 | 0 | 10 Mbps | æœ€å°å¸¦å®½ |
| 1 | 1 | 29 Mbps | ç¬¬1ç­‰çº§ |
| 2 | 2 | 48 Mbps | ç¬¬2ç­‰çº§ |
| 3 | 3 | 67 Mbps | ç¬¬3ç­‰çº§ |
| 4 | 4 | 86 Mbps | ç¬¬4ç­‰çº§ |
| 5 | 5 | 105 Mbps | ç¬¬5ç­‰çº§ |
| 6 | 6 | 124 Mbps | ç¬¬6ç­‰çº§ |
| 7 | 7 | 143 Mbps | ç¬¬7ç­‰çº§ |
| 8 | 8 | 162 Mbps | ç¬¬8ç­‰çº§ |
| 9 | 9 | 181 Mbps | ç¬¬9ç­‰çº§ |

### 2. è½¬æ¢å…¬å¼

```python
# å½“å‰å®ç°ä¸­çš„è½¬æ¢
allocated_bandwidth = bandwidth_action * 10  # ç®€å•çº¿æ€§è½¬æ¢

# æ›´ç²¾ç¡®çš„è½¬æ¢
def action_to_bandwidth(bandwidth_action, min_bw=10, max_bw=200, levels=10):
    """å°†å¸¦å®½åŠ¨ä½œè½¬æ¢ä¸ºå®é™…å¸¦å®½å€¼"""
    step = (max_bw - min_bw) / (levels - 1)
    return min_bw + bandwidth_action * step
```

## åœ¨ä»£ç ä¸­çš„ä½¿ç”¨

### 1. ç½‘ç»œè¾“å‡ºå±‚

```python
# Actorç½‘ç»œä¸­çš„å¸¦å®½åˆ†é…å¤´
self.bandwidth_head = nn.Sequential(
    nn.Linear(hidden_dim * 2, hidden_dim),
    nn.ReLU(),
    nn.Linear(hidden_dim, bandwidth_levels)  # è¾“å‡º10ä¸ªå€¼
)
```

### 2. åŠ¨ä½œé€‰æ‹©

```python
# é€‰æ‹©å¸¦å®½åŠ¨ä½œ
bandwidth_probs = F.softmax(bandwidth_logit, dim=-1)
bandwidth_dist = torch.distributions.Categorical(bandwidth_probs)
bandwidth_action = bandwidth_dist.sample()  # 0-9ä¹‹é—´çš„æ•´æ•°
```

### 3. å¸¦å®½åˆ†é…

```python
# è½¬æ¢ä¸ºå®é™…å¸¦å®½å€¼
allocated_bandwidth = bandwidth_action * 10  # 0, 10, 20, ..., 90

# ä¸ºé“¾è·¯åˆ†é…å¸¦å®½
scheduler.allocate_bandwidth(from_node, to_node, allocated_bandwidth)
```

## å¸¦å®½ç­‰çº§æ•°çš„å½±å“

### 1. åŠ¨ä½œç©ºé—´å¤§å°

```
åŠ¨ä½œç©ºé—´ = ç‰©ç†èŠ‚ç‚¹æ•° Ã— å¸¦å®½ç­‰çº§æ•°
        = 10 Ã— 10 = 100
```

### 2. ç²¾åº¦ vs å¤æ‚åº¦æƒè¡¡

| å¸¦å®½ç­‰çº§æ•° | ç²¾åº¦ | åŠ¨ä½œç©ºé—´ | è®­ç»ƒéš¾åº¦ |
|------------|------|----------|----------|
| 5 | ä½ | 50 | ç®€å• |
| 10 | ä¸­ | 100 | ä¸­ç­‰ |
| 20 | é«˜ | 200 | å›°éš¾ |
| 50 | å¾ˆé«˜ | 500 | å¾ˆå›°éš¾ |

### 3. å®é™…åº”ç”¨è€ƒè™‘

#### é€‚åˆçš„å¸¦å®½ç­‰çº§æ•°
- **å°è§„æ¨¡ç½‘ç»œ**ï¼š5-10ä¸ªç­‰çº§
- **ä¸­ç­‰è§„æ¨¡ç½‘ç»œ**ï¼š10-20ä¸ªç­‰çº§
- **å¤§è§„æ¨¡ç½‘ç»œ**ï¼š20-50ä¸ªç­‰çº§

#### é€‰æ‹©åŸåˆ™
1. **ç²¾åº¦è¦æ±‚**ï¼šéœ€è¦å¤šç²¾ç»†çš„å¸¦å®½æ§åˆ¶
2. **è®­ç»ƒèµ„æº**ï¼šå¯ç”¨çš„è®¡ç®—èµ„æºå’Œæ—¶é—´
3. **ç½‘ç»œè§„æ¨¡**ï¼šç‰©ç†èŠ‚ç‚¹å’Œè™šæ‹ŸèŠ‚ç‚¹çš„æ•°é‡
4. **å®é™…éœ€æ±‚**ï¼šä¸šåŠ¡å¯¹å¸¦å®½ç²¾åº¦çš„è¦æ±‚

## æ”¹è¿›å»ºè®®

### 1. è‡ªé€‚åº”å¸¦å®½ç­‰çº§

```python
def adaptive_bandwidth_levels(min_bw, max_bw, precision=0.1):
    """æ ¹æ®å¸¦å®½èŒƒå›´å’Œç²¾åº¦è¦æ±‚è‡ªé€‚åº”ç¡®å®šç­‰çº§æ•°"""
    range_bw = max_bw - min_bw
    levels = int(range_bw / precision)
    return max(5, min(50, levels))  # é™åˆ¶åœ¨5-50ä¹‹é—´
```

### 2. éå‡åŒ€åˆ†å¸ƒ

```python
def non_uniform_bandwidth_levels(min_bw, max_bw, levels=10):
    """éå‡åŒ€åˆ†å¸ƒçš„å¸¦å®½ç­‰çº§ï¼ˆå¯¹æ•°åˆ†å¸ƒï¼‰"""
    import numpy as np
    log_min = np.log(min_bw)
    log_max = np.log(max_bw)
    log_steps = np.linspace(log_min, log_max, levels)
    return np.exp(log_steps)
```

### 3. åŸºäºéœ€æ±‚çš„åŠ¨æ€ç­‰çº§

```python
def dynamic_bandwidth_levels(link_requirements):
    """æ ¹æ®é“¾è·¯éœ€æ±‚åŠ¨æ€ç¡®å®šå¸¦å®½ç­‰çº§"""
    min_req = min(req['min_bandwidth'] for req in link_requirements)
    max_req = max(req['max_bandwidth'] for req in link_requirements)
    return adaptive_bandwidth_levels(min_req, max_req)
```

## å®é™…ç¤ºä¾‹

### ç¤ºä¾‹1ï¼šç®€å•åœºæ™¯
```python
# é…ç½®
bandwidth_levels = 10
min_bandwidth = 10
max_bandwidth = 100

# åŠ¨ä½œé€‰æ‹©
bandwidth_action = 7  # æ™ºèƒ½ä½“é€‰æ‹©çš„åŠ¨ä½œ

# è½¬æ¢
actual_bandwidth = min_bandwidth + bandwidth_action * (max_bandwidth - min_bandwidth) / (bandwidth_levels - 1)
# actual_bandwidth = 10 + 7 * 90 / 9 = 80 Mbps
```

### ç¤ºä¾‹2ï¼šå¤æ‚åœºæ™¯
```python
# é…ç½®
bandwidth_levels = 20
min_bandwidth = 50
max_bandwidth = 500

# åŠ¨ä½œé€‰æ‹©
bandwidth_action = 15

# è½¬æ¢
actual_bandwidth = 50 + 15 * 450 / 19 = 405.26 Mbps
```

## æ€»ç»“

å¸¦å®½ç­‰çº§æ•°æ˜¯å¼ºåŒ–å­¦ä¹ ä¸­å¤„ç†è¿ç»­å¸¦å®½å€¼çš„ç¦»æ•£åŒ–æ–¹æ³•ï¼š

### âœ… **ä¼˜ç‚¹**
1. **ç®€åŒ–åŠ¨ä½œç©ºé—´**ï¼šå°†è¿ç»­å€¼è½¬æ¢ä¸ºç¦»æ•£é€‰æ‹©
2. **ä¾¿äºè®­ç»ƒ**ï¼šç¦»æ•£åŠ¨ä½œç©ºé—´æ›´å®¹æ˜“æ”¶æ•›
3. **å¯é…ç½®æ€§**ï¼šå¯ä»¥æ ¹æ®éœ€æ±‚è°ƒæ•´ç²¾åº¦

### âš ï¸ **æ³¨æ„äº‹é¡¹**
1. **ç²¾åº¦æŸå¤±**ï¼šç¦»æ•£åŒ–ä¼šæŸå¤±ä¸€äº›ç²¾åº¦
2. **ç­‰çº§é€‰æ‹©**ï¼šéœ€è¦å¹³è¡¡ç²¾åº¦å’Œå¤æ‚åº¦
3. **è½¬æ¢ä¸€è‡´æ€§**ï¼šç¡®ä¿åŠ¨ä½œåˆ°å¸¦å®½çš„è½¬æ¢ä¸€è‡´

### ğŸ¯ **å»ºè®®**
- å¯¹äºå¤§å¤šæ•°åº”ç”¨ï¼Œ10ä¸ªå¸¦å®½ç­‰çº§æ˜¯åˆç†çš„èµ·ç‚¹
- å¯ä»¥æ ¹æ®å®é™…éœ€æ±‚è°ƒæ•´ç­‰çº§æ•°
- è€ƒè™‘ä½¿ç”¨è‡ªé€‚åº”æˆ–éå‡åŒ€åˆ†å¸ƒçš„ç­‰çº§ 